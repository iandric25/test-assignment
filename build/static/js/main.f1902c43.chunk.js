(this["webpackJsonptest-assignment"]=this["webpackJsonptest-assignment"]||[]).push([[0],{17:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAALcSURBVEhLrZTLS2phFMVPj0EFVpBSWTYookkTh0EvhEKiJGgSvaxBD5oEEf0FBc0d1CAoyIjAiYYokhEFUv0LTu0J2TvtuS5r36t4ely1XLA5B/X7ufde+9vK4uIiMhnK09MTGM/Pz6r4+Hmq7woyrF8D39/f8fr6KvH29vY7IAF3d3fY2dnB/v4+zs7Ofg4k7ObmBl6vF2NjYxgfH8f6+vrPgISFw2Hs7u6it7cXer0excXFaG9vTx/Inj0+PsLv98NkMqGwsBA5OTnIzs4WaFpAwu7v7+HxeDA0NISSkhLk5uYiKytLgGVlZakDWSYzczqdsFqtqKqqkswI41On06G7uzs1IEeCBmxvb2NwcBAGgyEOY2ZarRYWiwVra2vJgczs+voagUAAfX19YkBiZkVFRTCbzbDb7bi6ukoOjEajODg4kMx4mBkRxsjPz0djYyN8Ph8eHh6kx98C+SVhbrcb/f39KC8vjxvAoLsNDQ1wuVw4Pz+XtlBfAllmJBKRno2OjkrPEt1kzzo6OmSQCeNiiOkTkDBeJw7txMQEamtrVTCW3dnZKQawZ8yM1cSkAhJGN4+OjjA8PIzKykqVARqNBs3NzVhZWcHt7a0KFFMcGOsZYSMjIzL1MQP4zMvLQ319PTY3N3F5efkljIoD2Ye9vT1MTk6itLRUZQDLbGpqwtbWFk5PT/Hy8vLv1GcJkP92eHiImZkZ1NXVqUaDZba0tEjPLi4u/gujFP4gFArB4XDI/ayoqBAgg2VzAdhstjjsu1JjUtjcjY0NOTQ7O4u2tjaZsYKCArS2tmJ5eVlgNCwVKcfHx+jq6pJZ422Yn5+H0WiU0mkA916qMErhTaipqREXq6urMTAwgNXVVdnEJycnSXv2Ucr09LRMPncZmz83N4dgMChDmy6MUrhBenp6MDU1haWlJVkE3HvplJkoZWFhQeaPTnNjfLxK6Urh7fgtJFFKpkB/BfwBA4mHz1cnw4cAAAAASUVORK5CYII="},28:function(e,t,a){e.exports=a.p+"static/media/defaultImg.8619a694.png"},31:function(e,t,a){e.exports=a(49)},38:function(e,t,a){},39:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);a(32),a(33);var n=a(0),r=a.n(n),o=a(16),s=a.n(o),i=(a(38),a(3)),c=a(4),l=a(6),d=a(5),m=(a(39),a(15)),u=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row header-row"},r.a.createElement("div",{className:"col-md-3 col-4 d-flex align-items-center"},r.a.createElement("h5",null,"Contact list")),r.a.createElement("div",{className:"col-md-9 col-8 d-flex align-items-center"},r.a.createElement("div",{className:"col-md-12 d-flex justify-content-end"},r.a.createElement(m.b,{className:"btn btn-primary",to:"/"},r.a.createElement("span",null,"+")," New contact"))))}}]),a}(r.a.Component),h=a(18),p=a(12),v=a(2),b=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.userList,t=this.props.activeId,a="";return r.a.createElement("div",{className:"list-group"},e.map((function(e){return a=e.id==t?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",r.a.createElement(m.b,{className:a,key:e.id,to:"".concat(e.id)},e.name)})))}}]),a}(r.a.Component),f=a(28),E=a.n(f),g={DEVELOPER:"Developer",CEO:"CEO",DESIGNER:"Designer",CTO:"CTO"},y={name:"",occupation:g.DEVELOPER,born:""},k=a(17),j=a.n(k),O=a(10),A=a.n(O),C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){A()(this.modal).modal("show"),A()(this.modal).on("hidden.bs.modal",this.props.handleHideModal)}},{key:"componentWillUnmount",value:function(){A()(this.modal).modal("hide")}},{key:"render",value:function(){var e=this;return s.a.createPortal(r.a.createElement("div",{className:"modal fade",ref:function(t){return e.modal=t},id:"exampleModal",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},this.props.modalTitle),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},this.props.children),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",onClick:this.props.onPrimaryBtnClick,className:"btn btn-primary"},this.props.btnPrimaryText))))),document.getElementById("modal-root"))}}]),a}(r.a.Component),N=a(29),B=a.n(N),w=(a(45),a(46),a(47),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={disabledInputs:[],user:{},removeModal:!1,file:null,imagePreviewUrl:null,cropModal:!1},n.onEditBtn=n.onEditBtn.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n.onRemoveBtn=n.onRemoveBtn.bind(Object(v.a)(n)),n.handleHideRemoveModal=n.handleHideRemoveModal.bind(Object(v.a)(n)),n.handleHideCropModal=n.handleHideCropModal.bind(Object(v.a)(n)),n.handleRemoveUser=n.handleRemoveUser.bind(Object(v.a)(n)),n.onEditPictureBtn=n.onEditPictureBtn.bind(Object(v.a)(n)),n.onImgChange=n.onImgChange.bind(Object(v.a)(n)),n.onCrop=n.onCrop.bind(Object(v.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;A()(this.inputDate).datepicker({dateFormat:"yy/mm/dd",onSelect:function(t){var a=Object(p.a)({},e.state.user);a.born=t,e.setState({user:a})}})}},{key:"componentDidUpdate",value:function(e,t){if(e.user.id!==this.props.user.id)if(!0!==this.props.newContact){var a=[];Object.keys(this.props.user).map((function(e){"id"!=e&&a.push(e)})),this.setState({disabledInputs:a,user:this.props.user,removeModal:!1,cropModal:!1})}else this.setState({disabledInputs:[],user:this.props.user})}},{key:"componentWillUnmount",value:function(){A()(this.inputDate).datepicker("destroy")}},{key:"handleInputChange",value:function(e){var t=this.props.user;t[e.target.id]=e.target.value,this.setState({user:t})}},{key:"onEditBtn",value:function(e){var t=this.state.disabledInputs,a=t.indexOf(e.currentTarget.dataset.target);a>-1&&t.splice(a,1),this.setState({disabledInputs:t})}},{key:"onRemoveBtn",value:function(){this.setState({removeModal:!0})}},{key:"handleHideRemoveModal",value:function(){this.setState({removeModal:!1})}},{key:"handleHideCropModal",value:function(){this.setState({cropModal:!1})}},{key:"handleRemoveUser",value:function(){this.props.removeUserFn(this.state.user.id),this.setState({removeModal:!1})}},{key:"onEditPictureBtn",value:function(){this.inputImg.click()}},{key:"onImgChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){t.setState({file:n,imagePreviewUrl:a.result,cropModal:!0})},a.readAsDataURL(n)}},{key:"onCrop",value:function(){var e=this.state.user;e.img=this.cropRef.getCroppedCanvas().toDataURL(),this.setState({user:e,cropModal:!1})}},{key:"render",value:function(){var e=this,t=this.state.disabledInputs,a=this.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},a.name),r.a.createElement("div",null,a.id?r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return e.props.updateUser(e.state.user)},className:"btn btn-primary"},"Update"),r.a.createElement("button",{type:"button",onClick:this.onRemoveBtn,className:"btn btn-primary"},"Remove")):r.a.createElement("button",{type:"button",onClick:function(){return e.props.addUser(e.state.user)},className:"btn btn-primary"},"Add"))),r.a.createElement("input",{id:"id",hidden:!0,defaultValue:a.id}),r.a.createElement("div",{className:"modal-body row"},r.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-9  user-info"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"name",className:"col-form-label col-sm-3 col-5 col-md-3"},"Name:"),r.a.createElement("div",{className:"col-sm-9 col-7 col-md-9 d-flex align-items-center"},r.a.createElement("input",{type:"text",className:"form-control",id:"name",onChange:this.handleInputChange,value:a.name,disabled:t.indexOf("name")>-1}),r.a.createElement("button",{onClick:this.onEditBtn,"data-target":"name",className:"editBtn"},r.a.createElement("img",{src:j.a})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"occupation",className:"col-form-label col-sm-3 col-5 col-md-3"},"Occupation:"),r.a.createElement("div",{className:"col-sm-9 col-7 col-md-9 d-flex align-items-center"},r.a.createElement("select",{value:a.occupation,className:"form-control",onChange:this.handleInputChange,id:"occupation",disabled:t.indexOf("occupation")>-1},Object.keys(g).map((function(e){return r.a.createElement("option",{key:g[e],value:g[e]},g[e])}))),r.a.createElement("button",{onClick:this.onEditBtn,"data-target":"occupation",className:"editBtn"},r.a.createElement("img",{src:j.a})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"born",className:"col-form-label col-sm-3 col-5 col-md-3"},"Born:"),r.a.createElement("div",{className:"col-sm-9 col-7 col-md-9 d-flex align-items-center"},r.a.createElement("input",{ref:function(t){return e.inputDate=t},placeholder:"YYYY/MM/DD",type:"text",readOnly:!0,className:"form-control datepicker",id:"born",value:a.born})))),r.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-3 user-img"},r.a.createElement("button",{className:"editBtn editPictureBtn",onClick:this.onEditPictureBtn},r.a.createElement("input",{accept:"image/png, image/jpeg",onChange:this.onImgChange,ref:function(t){return e.inputImg=t},type:"file"}),r.a.createElement("img",{src:j.a})),r.a.createElement("img",{src:a.img&&""!==a.img?a.img:E.a})))),this.state.removeModal&&r.a.createElement(C,{modalTitle:"Remove ".concat(a.name),handleHideModal:this.handleHideRemoveModal,onPrimaryBtnClick:this.handleRemoveUser,btnPrimaryText:"Remove"},r.a.createElement("div",null,"Remove ",a.name," from contact list?")),this.state.cropModal&&r.a.createElement(C,{modalTitle:"Crop image",handleHideModal:this.handleHideCropModal,onPrimaryBtnClick:this.onCrop,btnPrimaryText:"Crop"},r.a.createElement(B.a,{dragMode:"move",cropBoxResizable:!1,minCropBoxWidth:164,minContainerWidth:350,minContainerHeight:300,ref:function(t){return e.cropRef=t},src:this.state.imagePreviewUrl,aspectRatio:1})))}}]),a}(r.a.Component)),U=a(30),M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(c.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e),console.log(t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Error!!!"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component);function S(){if("indexedDB"in window)return Object(U.a)("test",1,{upgrade:function(e){if(!e.objectStoreNames.contains("users"))e.createObjectStore("users",{keyPath:"id",autoIncrement:!0})}});console.log("This browser doesn't support IndexedDB")}var I=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userList:[],id:void 0,contact:y,newContact:!0,is404:!1,dbPromise:S()},n.removeUser=n.removeUser.bind(Object(v.a)(n)),n.addUser=n.addUser.bind(Object(v.a)(n)),n.updateUser=n.updateUser.bind(Object(v.a)(n)),n}return Object(c.a)(a,[{key:"setActiveUser",value:function(e){if(e){var t=-1,a=null;if(this.state.userList.map((function(n,r){if(e==n.id)return a=Object(p.a)({},n),void(t=r)})),-1===t)return void this.setState({is404:!0});this.setState({id:e,contact:a,newContact:!1,is404:!1})}else this.setState({newContact:!0,contact:Object(p.a)({},y),id:void 0})}},{key:"componentDidMount",value:function(){var e=this;this.state.dbPromise.then((function(e){return e.transaction("users","readonly").objectStore("users").getAll()})).then((function(t){t.length>0&&e.setState({userList:t});var a=e.props.match.params.id;e.setActiveUser(a)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.match.params.id;e.match.params.id!=a&&this.setActiveUser(a)}},{key:"removeUser",value:function(e){var t=this;this.state.dbPromise.then((function(t){var a=t.transaction("users","readwrite");return a.objectStore("users").delete(e),a.complete})).then((function(){var a=-1,n=Object(h.a)(t.state.userList);t.state.userList.map((function(t,n){e!=t.id||(a=n)})),-1!==a&&n.splice(a,1),t.setState({userList:n},(function(){t.props.history.push("/")}))}))}},{key:"addUser",value:function(e){var t=this;this.state.dbPromise.then((function(a){a.transaction("users","readwrite").objectStore("users").add(e).then((function(a){e.id=a;var n=Object(h.a)(t.state.userList);n.push(e),t.setState({userList:n},(function(){t.props.history.push("/"+a)}))}))}))}},{key:"updateUser",value:function(e){var t=this;this.state.dbPromise.then((function(t){var a=t.transaction("users","readwrite");return a.objectStore("users").put(e),a.complete})).then((function(){var a=-1,n=Object(h.a)(t.state.userList);n.forEach((function(t,n){e.id==t.id&&(a=n)})),-1!==a?(n.splice(a,1,e),t.setState({userList:n})):t.setState({is404:!0})}))}},{key:"render",value:function(){var e=this.state.contact;return r.a.createElement(M,null,r.a.createElement("div",{className:"row body-row"},r.a.createElement("div",{className:"col-md-3 user-list"},r.a.createElement(b,{activeId:this.state.id,userList:this.state.userList})),r.a.createElement("div",{className:"col-md-9 user-card"},this.state.is404?r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},"User does not exist!")):r.a.createElement(w,{newContact:this.state.newContact,user:e,updateUser:this.updateUser,addUser:this.addUser,userList:this.state.userList,removeUserFn:this.removeUser}))))}}]),a}(r.a.Component),x=a(11),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(u,null),r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:"/:id?",component:I}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.f1902c43.chunk.js.map